{% comment %}
  Renders a product card (Block)

  Accepts:
  - product: {Object} Product info,
  - badge: {Boolean} Control product badge visibility

  Usage:
  {% render 'product-block', product: {...} %}
{% endcomment %}

{% assign default_variant = product.selected_or_first_available_variant %}
{% assign price = default_variant.price | default: product.price %}
{% assign compare_at_price = default_variant.compare_at_price | default: product.compare_at_price %}

<li block="product">
  <a href="{{ product.url }}">
    {% if product.preview_image %}
      <img
        src="{{ product.thumbnail }}"
        alt="product"
        height="100%"
        width="100%"
      >
    {% else %}
      {% render 'ui-icon', name: 'image', size: 60, filled: true %}
    {% endif %}
    <div class="price">
      <span class="original-price">
        {{ price | default: 0 | money }}
      </span>
      {% if compare_at_price %}
        <span class="compare-at-price">
          {{ compare_at_price | default: 0 | money }}
        </span>
      {% endif %}
    </div>
    {% if badge %}
      <div class="badge">
        <span>{{ badge }}</span>
      </div>
    {% endif %}
    <div class="info">
      <p class="title">{{ product.name | default: 'My product' }}</p>
      <span class="action">{{ button_text | default: 'View' }}</span>
    </div>
  </a>
</li>
