{% comment %}
  Renders a product button

  Accepts:
  - product: {Object} Product info

  Usage:
  {% render 'ui-product-button' %}
{% endcomment %}

{% assign default_variant = product.selected_or_first_available_variant %}

<ui-product-button
  quantity="1"
  variant-id="{{ default_variant.id }}"
  {% unless product.available %}
    not-available
  {% endunless %}
  {% if source %}
    source="{{ source }}"
  {% endif %}
  {% if product.skip_to_checkout %}
    skip-cart
  {% endif %}
>
  {% if product.skip_to_checkout %}
    {{ 'general.shop_now' | t }}
  {% else %}
    <button
      ui-button
      data-variant="primary"
      data-size="sm"
      as-icon
      aria-label="{{ 'general.add_to_cart' | t }}"
    >
      {% render 'ui-icon', name: 'add' %}
    </button>
  {% endif %}
</ui-product-button>
